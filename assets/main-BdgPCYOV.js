var Ve=Object.defineProperty;var je=t=>{throw TypeError(t)};var $e=(t,e,s)=>e in t?Ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Q=(t,e,s)=>$e(t,typeof e!="symbol"?e+"":e,s),se=(t,e,s)=>e.has(t)||je("Cannot "+s);var r=(t,e,s)=>(se(t,e,"read from private field"),s?s.call(t):e.get(t)),x=(t,e,s)=>e.has(t)?je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),u=(t,e,s,i)=>(se(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),f=(t,e,s)=>(se(t,e,"access private method"),s);import{S as Ke,p as Ce,r as T,s as ie,a as X,n as We,i as ae,b as Re,t as Ne,f as Ge,c as Je,d as we,e as Oe,g as y,h as Xe,u as pe,j as Ye,k as Ze,l as et,m as tt,o as a,q as st,v as rt,w as W,G as Ie,x as it,y as at,z as Qe,I as xe,A as ke,F as N,T as Y,B as nt,C as re,D as ot,E as ct,H as Le,J as Se,K as lt,L as ht,M as ut,N as dt,O as ft,P as D,Q as pt,R as xt,U as mt,V as gt,W as bt,X as yt,Y as vt,Z as jt,_ as Ct}from"./CommonLayout-Bp5Pgs15.js";var R,l,$,b,k,q,F,S,K,A,B,L,M,O,H,h,V,ne,oe,ce,le,he,ue,de,Me,Fe,Rt=(Fe=class extends Ke{constructor(e,s){super();x(this,h);x(this,R);x(this,l);x(this,$);x(this,b);x(this,k);x(this,q);x(this,F);x(this,S);x(this,K);x(this,A);x(this,B);x(this,L);x(this,M);x(this,O);x(this,H,new Set);this.options=s,u(this,R,e),u(this,S,null),u(this,F,Ce()),this.options.experimental_prefetchInRender||r(this,F).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,l).addObserver(this),Te(r(this,l),this.options)?f(this,h,V).call(this):this.updateResult(),f(this,h,le).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fe(r(this,l),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fe(r(this,l),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,h,he).call(this),f(this,h,ue).call(this),r(this,l).removeObserver(this)}setOptions(e,s){const i=this.options,o=r(this,l);if(this.options=r(this,R).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof T(this.options.enabled,r(this,l))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,h,de).call(this),r(this,l).setOptions(this.options),i._defaulted&&!ie(this.options,i)&&r(this,R).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,l),observer:this});const c=this.hasListeners();c&&Ee(r(this,l),o,this.options,i)&&f(this,h,V).call(this),this.updateResult(s),c&&(r(this,l)!==o||T(this.options.enabled,r(this,l))!==T(i.enabled,r(this,l))||X(this.options.staleTime,r(this,l))!==X(i.staleTime,r(this,l)))&&f(this,h,ne).call(this);const n=f(this,h,oe).call(this);c&&(r(this,l)!==o||T(this.options.enabled,r(this,l))!==T(i.enabled,r(this,l))||n!==r(this,O))&&f(this,h,ce).call(this,n)}getOptimisticResult(e){const s=r(this,R).getQueryCache().build(r(this,R),e),i=this.createResult(s,e);return St(this,i)&&(u(this,b,i),u(this,q,this.options),u(this,k,r(this,l).state)),i}getCurrentResult(){return r(this,b)}trackResult(e,s){const i={};return Object.keys(e).forEach(o=>{Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),s==null||s(o),e[o])})}),i}trackProp(e){r(this,H).add(e)}getCurrentQuery(){return r(this,l)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,R).defaultQueryOptions(e),i=r(this,R).getQueryCache().build(r(this,R),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return f(this,h,V).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,b)))}createResult(e,s){var ve;const i=r(this,l),o=this.options,c=r(this,b),n=r(this,k),v=r(this,q),m=e!==i?e.state:r(this,$),{state:j}=e;let d={...j},I=!1,C;if(s._optimisticResults){const g=this.hasListeners(),U=!g&&Te(e,s),_=g&&Ee(e,i,s,o);(U||_)&&(d={...d,...Je(j.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:z,errorUpdatedAt:P,status:E}=d;if(s.select&&d.data!==void 0)if(c&&d.data===(n==null?void 0:n.data)&&s.select===r(this,K))C=r(this,A);else try{u(this,K,s.select),C=s.select(d.data),C=we(c==null?void 0:c.data,C,s),u(this,A,C),u(this,S,null)}catch(g){u(this,S,g)}else C=d.data;if(s.placeholderData!==void 0&&C===void 0&&E==="pending"){let g;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(v==null?void 0:v.placeholderData))g=c.data;else if(g=typeof s.placeholderData=="function"?s.placeholderData((ve=r(this,B))==null?void 0:ve.state.data,r(this,B)):s.placeholderData,s.select&&g!==void 0)try{g=s.select(g),u(this,S,null)}catch(U){u(this,S,U)}g!==void 0&&(E="success",C=we(c==null?void 0:c.data,g,s),I=!0)}r(this,S)&&(z=r(this,S),C=r(this,A),P=Date.now(),E="error");const Z=d.fetchStatus==="fetching",ee=E==="pending",te=E==="error",be=ee&&Z,ye=C!==void 0,w={status:E,fetchStatus:d.fetchStatus,isPending:ee,isSuccess:E==="success",isError:te,isInitialLoading:be,isLoading:be,data:C,dataUpdatedAt:d.dataUpdatedAt,error:z,errorUpdatedAt:P,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>m.dataUpdateCount||d.errorUpdateCount>m.errorUpdateCount,isFetching:Z,isRefetching:Z&&!ee,isLoadingError:te&&!ye,isPaused:d.fetchStatus==="paused",isPlaceholderData:I,isRefetchError:te&&ye,isStale:me(e,s),refetch:this.refetch,promise:r(this,F)};if(this.options.experimental_prefetchInRender){const g=J=>{w.status==="error"?J.reject(w.error):w.data!==void 0&&J.resolve(w.data)},U=()=>{const J=u(this,F,w.promise=Ce());g(J)},_=r(this,F);switch(_.status){case"pending":e.queryHash===i.queryHash&&g(_);break;case"fulfilled":(w.status==="error"||w.data!==_.value)&&U();break;case"rejected":(w.status!=="error"||w.error!==_.reason)&&U();break}}return w}updateResult(e){const s=r(this,b),i=this.createResult(r(this,l),this.options);if(u(this,k,r(this,l).state),u(this,q,this.options),r(this,k).data!==void 0&&u(this,B,r(this,l)),ie(i,s))return;u(this,b,i);const o={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,v=typeof n=="function"?n():n;if(v==="all"||!v&&!r(this,H).size)return!0;const p=new Set(v??r(this,H));return this.options.throwOnError&&p.add("error"),Object.keys(r(this,b)).some(m=>{const j=m;return r(this,b)[j]!==s[j]&&p.has(j)})};(e==null?void 0:e.listeners)!==!1&&c()&&(o.listeners=!0),f(this,h,Me).call(this,{...o,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,h,le).call(this)}},R=new WeakMap,l=new WeakMap,$=new WeakMap,b=new WeakMap,k=new WeakMap,q=new WeakMap,F=new WeakMap,S=new WeakMap,K=new WeakMap,A=new WeakMap,B=new WeakMap,L=new WeakMap,M=new WeakMap,O=new WeakMap,H=new WeakMap,h=new WeakSet,V=function(e){f(this,h,de).call(this);let s=r(this,l).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(We)),s},ne=function(){f(this,h,he).call(this);const e=X(this.options.staleTime,r(this,l));if(ae||r(this,b).isStale||!Re(e))return;const i=Ne(r(this,b).dataUpdatedAt,e)+1;u(this,L,setTimeout(()=>{r(this,b).isStale||this.updateResult()},i))},oe=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,l)):this.options.refetchInterval)??!1},ce=function(e){f(this,h,ue).call(this),u(this,O,e),!(ae||T(this.options.enabled,r(this,l))===!1||!Re(r(this,O))||r(this,O)===0)&&u(this,M,setInterval(()=>{(this.options.refetchIntervalInBackground||Ge.isFocused())&&f(this,h,V).call(this)},r(this,O)))},le=function(){f(this,h,ne).call(this),f(this,h,ce).call(this,f(this,h,oe).call(this))},he=function(){r(this,L)&&(clearTimeout(r(this,L)),u(this,L,void 0))},ue=function(){r(this,M)&&(clearInterval(r(this,M)),u(this,M,void 0))},de=function(){const e=r(this,R).getQueryCache().build(r(this,R),this.options);if(e===r(this,l))return;const s=r(this,l);u(this,l,e),u(this,$,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Me=function(e){Oe.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,b))}),r(this,R).getQueryCache().notify({query:r(this,l),type:"observerResultsUpdated"})})},Fe);function wt(t,e){return T(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Te(t,e){return wt(t,e)||t.state.data!==void 0&&fe(t,e,e.refetchOnMount)}function fe(t,e,s){if(T(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&me(t,e)}return!1}function Ee(t,e,s,i){return(t!==e||T(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&me(t,s)}function me(t,e){return T(e.enabled,t)!==!1&&t.isStaleByTime(X(e.staleTime,t))}function St(t,e){return!ie(t.getCurrentResult(),e)}var De=y.createContext(!1),Tt=()=>y.useContext(De);De.Provider;function Et(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Pt=y.createContext(Et()),Ft=()=>y.useContext(Pt),Ot=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},It=t=>{y.useEffect(()=>{t.clearReset()},[t])},Qt=({result:t,errorResetBoundary:e,throwOnError:s,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&Xe(s,[t.error,i]),kt=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Lt=(t,e)=>t.isLoading&&t.isFetching&&!e,Mt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Pe=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Dt(t,e,s){var j,d,I,C,z;const i=pe(),o=Tt(),c=Ft(),n=i.defaultQueryOptions(t);(d=(j=i.getDefaultOptions().queries)==null?void 0:j._experimental_beforeQuery)==null||d.call(j,n),n._optimisticResults=o?"isRestoring":"optimistic",kt(n),Ot(n,c),It(c);const v=!i.getQueryCache().get(n.queryHash),[p]=y.useState(()=>new e(i,n)),m=p.getOptimisticResult(n);if(y.useSyncExternalStore(y.useCallback(P=>{const E=o?()=>{}:p.subscribe(Oe.batchCalls(P));return p.updateResult(),E},[p,o]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),y.useEffect(()=>{p.setOptions(n,{listeners:!1})},[n,p]),Mt(n,m))throw Pe(n,p,c);if(Qt({result:m,errorResetBoundary:c,throwOnError:n.throwOnError,query:i.getQueryCache().get(n.queryHash)}))throw m.error;if((C=(I=i.getDefaultOptions().queries)==null?void 0:I._experimental_afterQuery)==null||C.call(I,n,m),n.experimental_prefetchInRender&&!ae&&Lt(m,o)){const P=v?Pe(n,p,c):(z=i.getQueryCache().get(n.queryHash))==null?void 0:z.promise;P==null||P.catch(Ye).finally(()=>{p.updateResult()})}return n.notifyOnChangeProps?m:p.trackResult(m)}function Ue(t,e){return Dt(t,Rt)}const{withProvider:Ut,withContext:G,useStyles:hs,PropsProvider:us}=Ze({key:"card"}),ge=Ut("div","root"),_e=G("div","body"),qe=G("div","header");G("div","footer");const Ae=G("h3","title");G("p","description");const Be=y.forwardRef((t,e)=>{const s=et(),i=tt(s==null?void 0:s.getTextareaProps(),t);return a.jsx(st.textarea,{...i,ref:e})});Be.displayName="FieldTextarea";function _t(t){const{each:e,fallback:s,children:i}=t;return(e==null?void 0:e.length)===0?s||null:e==null?void 0:e.map(i)}const{withContext:qt,PropsProvider:ds}=rt({key:"textarea"}),At=qt(Be);async function Bt(){return(await W.get("/")).data}function Ht(t){return Ie({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}async function zt({id:t}){return(await W.delete(`/${t}`)).status===200}function Vt({todoId:t}){const e=pe(),s=it(),i=at(),{mutate:o}=Qe({mutationFn:zt,onSuccess:async()=>{await e.refetchQueries({queryKey:["todoList"]}),s.pathname===`/detail/${t}`&&i("/"),ke.create({description:"삭제 성공",type:"info"})}}),c=()=>{o({id:t})};return a.jsx(xe,{onClick:c,colorPalette:"red",size:"sm",bg:{base:"colorPalette.300",_dark:"colorPalette.400"},children:a.jsx(Ht,{})})}function $t({id:t,title:e,content:s}){const i=["blue","red","green","yellow","purple","teal","orange"],o=()=>i[Math.floor(Math.random()*i.length)]+".50";return a.jsxs(ge,{variant:"elevated",margin:3,h:300,w:300,bg:o(),color:"black",children:[a.jsx(qe,{position:"absolute",children:a.jsx(Ae,{children:e})}),a.jsxs(_e,{children:[a.jsx(N,{justify:"flex-end",children:a.jsx(Vt,{todoId:t})}),a.jsx(Y,{lineClamp:"9",children:s})]})]},t)}async function Kt(t){return(await W.post("/",t)).data}async function Wt({id:t,title:e,content:s}){return(await W.put(`/${t}`,{title:e,content:s})).data}class He{constructor(e,s,i,o,c){Q(this,"title");Q(this,"content");Q(this,"id");Q(this,"createdAt");Q(this,"updatedAt");this.title=e,this.content=s,this.id=i,this.createdAt=o,this.updatedAt=c}}Q(He,"validateSchema",nt().shape({id:re(),title:re().max(16,"제목은 최대 16자입니다.").required("제목은 필수입니다."),content:re().max(1024,"내용은 최대 1024자입니다.").required("비밀번호는 필수입니다.")}).noUnknown(!0));function Nt({id:t,title:e,content:s,onSubmit:i}){var m,j;const{register:o,handleSubmit:c,setValue:n,formState:{errors:v,isValid:p}}=ot({resolver:ht(He.validateSchema),mode:"onChange"});return y.useEffect(()=>{t&&n("id",t),e&&n("title",e),s&&n("content",s)},[t,e,s,n]),a.jsxs("form",{onSubmit:c(i),children:[a.jsx(N,{justify:"flex-end",marginBottom:1,children:a.jsx(xe,{type:"submit",colorPalette:"blue",size:"sm",bg:{base:"colorPalette.600",_dark:"colorPalette.400"},disabled:!p,children:a.jsx(ct,{})})}),a.jsxs(Le,{gap:"4",align:"flex-start",maxW:"sm",h:"100%",children:[a.jsx(Se,{invalid:!!v.title,errorText:(m=v.title)==null?void 0:m.message,required:!0,children:a.jsx(lt,{placeholder:"제목",...o("title",{required:"제목을 입력해주세요"})})}),a.jsx(Se,{h:"100%",invalid:!!v.content,errorText:(j=v.content)==null?void 0:j.message,required:!0,children:a.jsx(At,{placeholder:"내용",minH:"100px",h:"100%",...o("content",{required:"내용을 입력해주세요"})})})]})]})}function ze({id:t,title:e,content:s}){const i=pe(),{mutate:o}=Qe({mutationFn:t?Wt:Kt,onSuccess:async()=>{await i.refetchQueries({queryKey:["todoList"]}),await i.refetchQueries({queryKey:["todoView",t]}),ke.create({description:"Todos 업데이트 성공",type:"info"})},onError:n=>{console.error("Todo 추가 실패",n)}}),c=async n=>{o(n)};return a.jsx(Nt,{id:t,title:e,content:s,onSubmit:c})}function Gt(){return a.jsxs(ge,{variant:"elevated",margin:3,h:300,w:300,bg:ut("white","gray.100"),color:"black",children:[a.jsx(qe,{position:"absolute",children:a.jsx(Ae,{children:"Todo 추가"})}),a.jsx(_e,{children:a.jsx(ze,{})})]})}function Jt(){return a.jsx(ge,{variant:"elevated",margin:3,h:300,w:300,children:a.jsx(dt,{w:"100%",h:"100%"})})}function Xt(){const{data:t,isLoading:e,refetch:s}=Ue({queryKey:["todoList"],queryFn:Bt}),{serverHost:i}=y.useContext(ft);return y.useEffect(()=>{s()},[i,s]),a.jsx(D,{children:a.jsxs(N,{direction:"row",wrap:"wrap",justify:"flex-start",children:[a.jsx(Gt,{}),e&&new Array(8).fill(0).map((o,c)=>a.jsx(Jt,{},c)),a.jsx(_t,{each:t==null?void 0:t.slice().reverse(),children:o=>a.jsx(pt,{to:`/detail/${o.id}`,children:a.jsx($t,{...o})},o.id)})]})})}function Yt(){return a.jsx(xt,{children:t=>t?a.jsxs(N,{children:[a.jsx(D,{flex:"7",children:a.jsx(Xt,{})}),a.jsxs(D,{flex:"3",overflow:"hidden",children:[a.jsx(mt,{})," "]})]}):null})}function Zt(t){return Ie({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}async function es({id:t}){return(await W.get(`/${t}`)).data}function ts({title:t,content:e,createdAt:s,updatedAt:i}){return a.jsxs(D,{overflow:"hidden",textOverflow:"ellipsis",borderWidth:1,borderColor:"gray.300",borderRadius:"md",boxShadow:"md",mt:3,p:5,bg:"white",children:[a.jsx(gt,{paddingTop:5,children:t}),a.jsx(Y,{p:10,children:e}),a.jsx(N,{justify:"flex-end",borderTopWidth:1,borderColor:"gray.300",pt:2,children:a.jsxs(Le,{textStyle:"xs",children:[a.jsxs(Y,{children:["생성시간: ",new Date(s).toLocaleString()]}),a.jsxs(Y,{children:["수정시간: ",new Date(i).toLocaleString()]})]})})]})}function ss({id:t,title:e,content:s}){return a.jsx(D,{mt:2,padding:3,borderRadius:5,bg:"white",children:a.jsx(ze,{id:t,title:e,content:s})})}function rs({todoId:t}){const{data:e}=Ue({queryKey:["todoView",t],queryFn:()=>es({id:t}),enabled:!!t,staleTime:3e5}),[s,i]=y.useState(!1),o=()=>{i(c=>!c)};return a.jsx(a.Fragment,{children:e&&a.jsxs(D,{h:"100%",children:[a.jsx(xe,{onClick:o,mt:5,colorPalette:"blue",size:"sm",bg:{base:"colorPalette.500",_dark:"colorPalette.400"},children:s?a.jsx(Zt,{}):a.jsx(bt,{})}),s?a.jsx(ss,{...e}):a.jsx(ts,{...e})]})})}function is(){const{todoId:t}=yt();return a.jsx(D,{children:t&&a.jsx(rs,{todoId:t})})}const as="/wanted-pre-onboarding-challenge-fe-27/",ns=vt([{path:"/",element:a.jsx(Yt,{}),children:[{path:"/detail/:todoId",element:a.jsx(is,{})}]}],{basename:as});jt(document.getElementById("root")).render(a.jsx(y.StrictMode,{children:a.jsx(Ct,{router:ns})}));
